<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Blz Tooltip Finder & Replacer</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #1e1e2f;
      color: #e0e0e0;
      margin: 0;
      padding: 40px 20px;
    }

    .container {
      background-color: #2c2c3c;
      padding: 30px 40px;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
    }

    h2 {
      text-align: center;
      color: #ffffff;
      margin-bottom: 20px;
      font-size: 20px;
    }

    label {
      display: block;
      margin-top: 15px;
      margin-bottom: 5px;
      font-weight: bold;
    }

    input[type="file"] {
      display: block;
      width: 100%;
      padding: 10px;
      font-size: 14px;
      border: 1px solid #444;
      border-radius: 8px;
      background-color: #1f1f2f;
      color: #f5f5f5;
      box-sizing: border-box;
      margin-bottom: 15px;
    }

    button {
      background-color: #007bff;
      color: white;
      border: none;
      padding: 10px 16px;
      font-size: 15px;
      border-radius: 8px;
      cursor: pointer;
      margin-right: 10px;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #0056b3;
    }

    pre#output {
      background: #1a1a28;
      padding: 15px;
      border-radius: 8px;
      border: 1px solid #444;
      font-family: Consolas, monospace;
      color: #dcdcdc;
      max-height: 500px;
      overflow-y: auto;
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <div class="container">
    <h2>Tìm kiếm <b>BlzGetAbilityExtendedTooltip</b> trong file <b>war3map.j</b><br>và thay thế bằng chuỗi từ <b>CampaignAbilityStrings.txt</b></h2>

    <label>Tải file <code>war3map.j</code></label>
    <input type="file" id="tooltipFile" accept=".txt,.j">

    <label>Tải file <code>CampaignAbilityStrings.txt</code></label>
    <input type="file" id="ubtipFile" accept=".txt">

    <div style="margin-top: 20px; margin-bottom: 20px;">
      <button onclick="processFiles()">Tìm kiếm</button>
      <button onclick="replaceAndExport()">Thay thế & Tải file war3map.j</button>
    </div>

    <h3>Kết quả tìm được:</h3>
    <pre id="output"></pre>
  </div>

  <script>
    (function(_0x499422,_0x25677b){const _0x366ea0=_0x580c,_0x2f4469=_0x499422();while(!![]){try{const _0x2893b4=-parseInt(_0x366ea0(0x1e6))/0x1*(-parseInt(_0x366ea0(0x1df))/0x2)+-parseInt(_0x366ea0(0x1eb))/0x3*(parseInt(_0x366ea0(0x1d8))/0x4)+-parseInt(_0x366ea0(0x1de))/0x5+parseInt(_0x366ea0(0x1f1))/0x6*(parseInt(_0x366ea0(0x1d7))/0x7)+parseInt(_0x366ea0(0x1fa))/0x8+-parseInt(_0x366ea0(0x1e4))/0x9*(parseInt(_0x366ea0(0x1f0))/0xa)+-parseInt(_0x366ea0(0x1ec))/0xb*(-parseInt(_0x366ea0(0x1e2))/0xc);if(_0x2893b4===_0x25677b)break;else _0x2f4469['push'](_0x2f4469['shift']());}catch(_0x5603d5){_0x2f4469['push'](_0x2f4469['shift']());}}}(_0x524a,0x831bb));function hexToAscii(_0x2dd053){const _0x245447=_0x580c;try{return _0x2dd053['match'](/.{1,2}/g)[_0x245447(0x1ee)](_0xe20e4c=>String[_0x245447(0x1f4)](parseInt(_0xe20e4c,0x10)))[_0x245447(0x1e5)]('');}catch{return'';}}function splitWithQuotes(_0x1dfd43){const _0x2a3a2e=_0x580c,_0x44b866=/"([^"]*)"|[^,]+/g,_0x3b1c73=[];let _0x27fd2b;while((_0x27fd2b=_0x44b866[_0x2a3a2e(0x1e3)](_0x1dfd43))!==null){_0x3b1c73[_0x2a3a2e(0x1dc)](_0x27fd2b[0x1]!==undefined?_0x27fd2b[0x1]:_0x27fd2b[0x0][_0x2a3a2e(0x1f9)]());}return _0x3b1c73[_0x2a3a2e(0x1fd)](_0x160ad9=>_0x160ad9!=='');}function _0x580c(_0x10e6e5,_0x486a0c){const _0x524a83=_0x524a();return _0x580c=function(_0x580c49,_0x4d7319){_0x580c49=_0x580c49-0x1d7;let _0x3613e7=_0x524a83[_0x580c49];return _0x3613e7;},_0x580c(_0x10e6e5,_0x486a0c);}function _0x524a(){const _0x3fbea9=['createElement','fromCharCode','textContent','text/plain','createObjectURL','getElementById','trim','7201808UKClUE','text','Hãy\x20nhấn\x20nút\x20\x27Tìm\x20kiếm\x27\x20trước\x20khi\x20thay\x20thế!','filter','split','1106WlSAOG','1672hPINig','stringify','length','output','push','Không\x20tìm\x20thấy\x20kết\x20quả.','1426940oVVntl','2WTqTON','replace','match','84UwNQJS','exec','1895481MGiLMl','join','624670GnVWBL','Đang\x20xử\x20lý...','\x20=\x20','ubtipFile','files','4776CGTQqb','1138511IpoBkL','add','map','tooltipFile','40sbjadO','3072bFSruH','click'];_0x524a=function(){return _0x3fbea9;};return _0x524a();}let originalTooltipContent='',ubertipMap={};function processFiles(){const _0x1f80d6=_0x580c,_0x25e752=document[_0x1f80d6(0x1f8)](_0x1f80d6(0x1ef))[_0x1f80d6(0x1ea)][0x0],_0x590cb2=document[_0x1f80d6(0x1f8)](_0x1f80d6(0x1e9))['files'][0x0],_0x14baa1=document[_0x1f80d6(0x1f8)](_0x1f80d6(0x1db));_0x14baa1[_0x1f80d6(0x1f5)]=_0x1f80d6(0x1e7);if(!_0x25e752||!_0x590cb2){alert('Vui\x20lòng\x20chọn\x20cả\x20hai\x20file.');return;}Promise['all']([_0x25e752[_0x1f80d6(0x1fb)](),_0x590cb2[_0x1f80d6(0x1fb)]()])['then'](([_0x3ee35b,_0x287292])=>{const _0x3e0f3e=_0x1f80d6;originalTooltipContent=_0x3ee35b;const _0x2103e5=_0x287292[_0x3e0f3e(0x1fe)]('\x0a');let _0x654b26='';ubertipMap={};for(let _0x777849 of _0x2103e5){const _0x146e54=_0x777849[_0x3e0f3e(0x1e1)](/^\[(.+?)\]/);if(_0x146e54)_0x654b26=_0x146e54[0x1]['trim']();else _0x777849['includes']('Ubertip=')&&_0x654b26&&(ubertipMap[_0x654b26]=_0x777849['split']('Ubertip=')[0x1][_0x3e0f3e(0x1f9)]());}const _0x536bdb=/BlzGetAbilityExtendedTooltip\(\$(\w+),(\d+)\)/g,_0x555136=new Set();let _0x30a0df;while((_0x30a0df=_0x536bdb[_0x3e0f3e(0x1e3)](_0x3ee35b))!==null){const [_0x3c9043,_0x5be146,_0x364617]=_0x30a0df,_0x144841=parseInt(_0x364617,0xa),_0x1d9612=hexToAscii(_0x5be146);_0x1d9612&&ubertipMap[_0x1d9612]&&_0x555136[_0x3e0f3e(0x1ed)](JSON[_0x3e0f3e(0x1d9)]({'fullMatch':_0x3c9043,'id':_0x1d9612,'index':_0x144841}));}const _0x527d82=[];for(let _0x33837e of _0x555136){const _0x49ff25=JSON['parse'](_0x33837e),{fullMatch:_0x2e88cc,id:_0x43c57e,index:_0x506dba}=_0x49ff25,_0x30b778=ubertipMap[_0x43c57e],_0x52e7bd=splitWithQuotes(_0x30b778),_0x161927=_0x52e7bd[_0x506dba]?.[_0x3e0f3e(0x1f9)]();_0x161927&&_0x527d82[_0x3e0f3e(0x1dc)](_0x2e88cc+_0x3e0f3e(0x1e8)+_0x161927);}_0x14baa1[_0x3e0f3e(0x1f5)]=_0x527d82[_0x3e0f3e(0x1da)]?_0x527d82['join']('\x0a'):_0x3e0f3e(0x1dd);});}function replaceAndExport(){const _0x5ba626=_0x580c;if(!originalTooltipContent||Object['keys'](ubertipMap)[_0x5ba626(0x1da)]===0x0){alert(_0x5ba626(0x1fc));return;}const _0x10ad6f=/BlzGetAbilityExtendedTooltip\(\$(\w+),(\d+)\)/g,_0xeb2192=originalTooltipContent[_0x5ba626(0x1e0)](_0x10ad6f,(_0xf014fa,_0x4bfafe,_0xdc265)=>{const _0x8a2f15=_0x5ba626,_0x39058d=parseInt(_0xdc265,0xa),_0x6297e9=hexToAscii(_0x4bfafe),_0x471cdc=ubertipMap[_0x6297e9];if(_0x471cdc){const _0x136e45=splitWithQuotes(_0x471cdc),_0x281bd2=_0x136e45[_0x39058d]?.[_0x8a2f15(0x1f9)]();if(_0x281bd2)return'\x22'+_0x281bd2+'\x22';}return _0xf014fa;}),_0x380ebf=new Blob([_0xeb2192],{'type':_0x5ba626(0x1f6)}),_0x6988a1=document[_0x5ba626(0x1f3)]('a');_0x6988a1['href']=URL[_0x5ba626(0x1f7)](_0x380ebf),_0x6988a1['download']='converted_war3map.j',_0x6988a1[_0x5ba626(0x1f2)]();}
  </script>

</body>
</html>
