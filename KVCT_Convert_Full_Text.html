<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Blz Tooltip Finder & Replacer</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #1e1e2f;
      color: #e0e0e0;
      margin: 0;
      padding: 40px 20px;
    }

    .container {
      background-color: #2c2c3c;
      padding: 30px 40px;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
    }

    h2, h3 {
      text-align: center;
      color: #ffffff;
    }

    label {
      display: block;
      margin-top: 15px;
      font-weight: 500;
    }

    input[type="file"] {
      width: 100%;
      padding: 10px 12px;
      font-size: 16px;
      border: 1px solid #444;
      border-radius: 8px;
      background-color: #1f1f2f;
      color: #f5f5f5;
      margin-top: 5px;
      margin-bottom: 15px;
      box-sizing: border-box;
    }

    button {
      background-color: #007bff;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      margin: 10px 10px 20px 0;
    }

    button:hover {
      background-color: #0056b3;
    }

    pre {
      background: #1a1a28;
      padding: 15px;
      border-radius: 8px;
      border: 1px solid #444;
      font-family: Consolas, monospace;
      color: #dcdcdc;
      max-height: 500px;
      overflow: auto;
    }

    .btn-group {
      text-align: center;
    }

    @media (max-width: 600px) {
      .container {
        padding: 20px;
      }
    }
  </style>
</head>
<body>

  <div class="container">
    <h2>Tìm kiếm BlzGetAbilityExtendedTooltip trong file war3map.j và thay thế bằng chuỗi trong file CampaignAbilityStrings.txt</h2>

    <label>File <code>war3map.j</code>:</label>
    <input type="file" id="tooltipFile" accept=".txt,.j">

    <label>File chứa <code>CampaignAbilityStrings.txt</code>:</label>
    <input type="file" id="ubtipFile" accept=".txt">

    <div class="btn-group">
      <button onclick="processFiles()">Tìm kiếm</button>
      <button onclick="replaceAndExport()">Thay thế & Tải file <code>converted_war3map.j</code></button>
    </div>

    <h3>Kết quả tìm được:</h3>
    <pre id="output">...</pre>
  </div>

<script>
  (function(_0x5bf4f0,_0x9fdf42){const _0x3cd60c=_0x5dab,_0x39eaf9=_0x5bf4f0();while(!![]){try{const _0x2eb66f=parseInt(_0x3cd60c(0xbf))/0x1+parseInt(_0x3cd60c(0xc5))/0x2*(-parseInt(_0x3cd60c(0xc7))/0x3)+-parseInt(_0x3cd60c(0xa9))/0x4+parseInt(_0x3cd60c(0xa7))/0x5*(-parseInt(_0x3cd60c(0xb4))/0x6)+parseInt(_0x3cd60c(0xb8))/0x7*(-parseInt(_0x3cd60c(0xb7))/0x8)+parseInt(_0x3cd60c(0xae))/0x9+parseInt(_0x3cd60c(0xc6))/0xa;if(_0x2eb66f===_0x9fdf42)break;else _0x39eaf9['push'](_0x39eaf9['shift']());}catch(_0xaf745f){_0x39eaf9['push'](_0x39eaf9['shift']());}}}(_0x232b,0xe1433));function _0x5dab(_0x378f4b,_0x5cca4b){const _0x232b2f=_0x232b();return _0x5dab=function(_0x5dab03,_0x39a557){_0x5dab03=_0x5dab03-0xa2;let _0x5c4ce6=_0x232b2f[_0x5dab03];return _0x5c4ce6;},_0x5dab(_0x378f4b,_0x5cca4b);}function decimalToAscii(_0x4dbed6){const _0x45ce3a=_0x5dab;let _0x1a733='';for(let _0x4bfa72=0x3;_0x4bfa72>=0x0;_0x4bfa72--){const _0x371674=_0x4dbed6>>0x8*_0x4bfa72&0xff;_0x1a733+=String[_0x45ce3a(0xa4)](_0x371674);}return _0x1a733;}function _0x232b(){const _0x2c7fe9=['253053DoRTVK','all','\x20=\x20','fromCharCode','stringify','files','103305qUTURc','time_war3map.j','1594884WVbvDq','tooltipFile','filter','textContent','Ubertip=','14789277mmhVja','Hãy\x20nhấn\x20nút\x20\x27Tìm\x20kiếm\x27\x20trước\x20khi\x20thay\x20thế!','getElementById','length','split','exec','90ATjtzb','createElement','text/plain','64sMgIqV','1242388COXWOw','keys','output','join','Vui\x20lòng\x20chọn\x20cả\x20hai\x20file.','replace','includes','380359mITNGy','text','push','Không\x20tìm\x20thấy\x20kết\x20quả.','then','trim','14frrNbt','16180280gXXGvw'];_0x232b=function(){return _0x2c7fe9;};return _0x232b();}function splitWithQuotes(_0x2a8549){const _0x5b4d1c=_0x5dab,_0x4e0c43=/"([^"]*)"|[^,]+/g,_0x7f2655=[];let _0x1874bd;while((_0x1874bd=_0x4e0c43[_0x5b4d1c(0xb3)](_0x2a8549))!==null){_0x7f2655[_0x5b4d1c(0xc1)](_0x1874bd[0x1]!==undefined?_0x1874bd[0x1]:_0x1874bd[0x0][_0x5b4d1c(0xc4)]());}return _0x7f2655[_0x5b4d1c(0xab)](_0x55c6a1=>_0x55c6a1!=='');}let originalTooltipContent='',ubertipMap={};function processFiles(){const _0x18f510=_0x5dab,_0x480e51=document['getElementById'](_0x18f510(0xaa))[_0x18f510(0xa6)][0x0],_0x42849f=document[_0x18f510(0xb0)]('ubtipFile')['files'][0x0],_0x18043f=document[_0x18f510(0xb0)](_0x18f510(0xba));_0x18043f[_0x18f510(0xac)]='Đang\x20xử\x20lý...';if(!_0x480e51||!_0x42849f){alert(_0x18f510(0xbc));return;}Promise[_0x18f510(0xa2)]([_0x480e51[_0x18f510(0xc0)](),_0x42849f[_0x18f510(0xc0)]()])[_0x18f510(0xc3)](([_0x56d7b6,_0x158771])=>{const _0x14877d=_0x18f510;originalTooltipContent=_0x56d7b6;const _0x3e2a1b=_0x158771[_0x14877d(0xb2)]('\x0a');let _0x54b73e='';for(let _0xd7bf0c of _0x3e2a1b){const _0x16f246=_0xd7bf0c['match'](/^\[(.+?)\]/);if(_0x16f246)_0x54b73e=_0x16f246[0x1][_0x14877d(0xc4)]();else _0xd7bf0c[_0x14877d(0xbe)](_0x14877d(0xad))&&_0x54b73e&&(ubertipMap[_0x54b73e]=_0xd7bf0c['split'](_0x14877d(0xad))[0x1][_0x14877d(0xc4)]());}const _0x5e80ab=/BlzGetAbilityExtendedTooltip\((\d+),\s*(\d+)\)/g,_0x3134eb=new Set();let _0x130268;while((_0x130268=_0x5e80ab[_0x14877d(0xb3)](_0x56d7b6))!==null){const [_0x5cbcca,_0xe5a710,_0x5519ba]=_0x130268,_0x5ab7e3=parseInt(_0xe5a710,0xa),_0x2d002d=parseInt(_0x5519ba,0xa),_0x25c279=decimalToAscii(_0x5ab7e3);_0x25c279&&ubertipMap[_0x25c279]&&_0x3134eb['add'](JSON[_0x14877d(0xa5)]({'fullMatch':_0x5cbcca,'id':_0x25c279,'index':_0x2d002d}));}const _0x97ed40=[];for(let _0x153bd9 of _0x3134eb){const _0x4cfd37=JSON['parse'](_0x153bd9),{fullMatch:_0x27f8f9,id:_0x1155ab,index:_0x2b1d8e}=_0x4cfd37,_0x349e89=ubertipMap[_0x1155ab],_0x5705f0=splitWithQuotes(_0x349e89),_0x35e4f0=_0x5705f0[_0x2b1d8e]?.[_0x14877d(0xc4)]();_0x35e4f0&&_0x97ed40['push'](_0x27f8f9+_0x14877d(0xa3)+_0x35e4f0);}_0x18043f[_0x14877d(0xac)]=_0x97ed40[_0x14877d(0xb1)]?_0x97ed40[_0x14877d(0xbb)]('\x0a'):_0x14877d(0xc2);});}function replaceAndExport(){const _0x3e952f=_0x5dab;if(!originalTooltipContent||Object[_0x3e952f(0xb9)](ubertipMap)['length']===0x0){alert(_0x3e952f(0xaf));return;}const _0x1a23ed=/BlzGetAbilityExtendedTooltip\((\d+),\s*(\d+)\)/g,_0x230d85=originalTooltipContent[_0x3e952f(0xbd)](_0x1a23ed,(_0x4bbe5b,_0x4f9306,_0x42f7f6)=>{const _0x3e51c5=parseInt(_0x4f9306,0xa),_0x53398d=parseInt(_0x42f7f6,0xa),_0x4303c8=decimalToAscii(_0x3e51c5),_0x5da055=ubertipMap[_0x4303c8];if(_0x5da055){const _0x4615e8=splitWithQuotes(_0x5da055),_0x38cbc0=_0x4615e8[_0x53398d]?.['trim']();if(_0x38cbc0)return'\x22'+_0x38cbc0+'\x22';}return _0x4bbe5b;}),_0x5db91b=new Blob([_0x230d85],{'type':_0x3e952f(0xb6)}),_0x793944=document[_0x3e952f(0xb5)]('a');_0x793944['href']=URL['createObjectURL'](_0x5db91b),_0x793944['download']=_0x3e952f(0xa8),_0x793944['click']();}
</script>

</body>
</html>
